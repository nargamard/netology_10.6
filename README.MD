# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

## Задание 1
```
Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.
```
---

# Постмортем

| Раздел        | Описание           |
| :------------ |:------------- |
| Краткое описание инцидента     | Вечером 21 октября 2018 года произошел инцидент, который привел к ухудшению обслуживания: не обслуживались webhook, не создавались сайты GitHub Pages, не отображались созданные issue; длительность инцидента - 24 часа 11 минут |
| Предшествующие события     | Техническое обслуживание оптического оборудования, при которой прозошла потеря связи между ЦОД и сетевым узлом на 43 секунды |
| Причина инцидента     | Во время нарушения связи началась запись данных в другой кластер на Западном побережье, после восстановления связи данные снова стали записываться в ЦОД на Восточном побережье США. Так произошло рассогласование баз данных, поскольку в ЦОД на Восточном и Западном побережье США содержадись нереплицированные записи, из-за чего не удалось корректно перенести основной сервер обратно в ЦОД на Восточном побережье |
| Воздействие     | Отображение неактуальной информации или неоотображение информации (в частности, issue), невозможность работы webhook и создания GitHub Pages |
| Обнаружение     | Поступили предупреждения от системы мониторинга |
| Реакция     | Инцидент устранен за 24 часа 11 минут
| Восстановление     | Отключено использование сервисов webhook и сборок страниц, произведено восстановление из резервных копий и последующая репликация данных |
| Таймлайн     | 22:54 Инженеры сортируют уведомления
| | 23:02 Инжененры определили, что топология репликации БД влючает только серверы из ЦОД на Западном побережье
| | 23:07 Команда реагирования решила заблокировать инструмент развертывания чтобы предотвратить внесение дополнительных изменений
| | 23:09 Сайту присвоен желтый статус, отправлено предупреждение координатору инцедентов
| | 23:11 Координатор инцедента присвоил сайту красный статус
| | 23:13 Привлечены разработчики баз данных, начато исследование текущего состояния кластеров БД
| | 23:19 Чтобы сохранить целостность данных остановлена работы webhook и сборки GitHub Pages
| | 00:05 Начата разработка плана восстановления из резервных копий и сохронизации реплик
| | 00:41 Запущен процесс резервного копирования всех затронутых кластеров MySQL
| | 06:51 Несколько кластеров на Восточном побережье завершили восстановление и начали репликацию
| | 11:12 Все БД восстановлены на Восточном побережье. Из-за начала рабочего дня возросла нагрузка, увеличилось время восстановления
| | 13:15 Чтобы компенсировать рост нагрузки, которая привела к росту задержки репликации, созданы дополнительные реплики на чтение
| | 16:24 Реплики синхронизированы, выполнен переход на исходную топологию
| | 16:45 Включены сервисы webhook и сборка страниц
| | 23:03 Завершены все сборки, статус сайта обновлен на зелёный |
| Последующие действия     | Предложено перенастроить Orchestrator, чтобы исключить такое поведение
|  | Ускорен переход на новый механизм информирования, чтобы можно было понять, что работает, что не рабоатет, а не просто "красный, желтый, зелёный"
| | Ускорено внедрение инициативы по поддержке избыточности N + 1 на уровне объекта